<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ControlDeck: cd_control_deck Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<h1>cd_control_deck Class Reference<br/>
<small>
[<a class="el" href="group___control_deck.html">ControlDeck framework</a>]</small>
</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="cd_control_deck" -->
<p>ControlDeck manager class.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="cd__control__deck_8h_source.html">cd_control_deck.h</a>&gt;</code></p>

<p><a href="classcd__control__deck-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcd__control__deck.html#a2744fa2f48bf2bdeb3be519098fdbdf4">cd_control_deck</a> (const char *control_setup_file=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new control deck, with an optional setup file.  <a href="#a2744fa2f48bf2bdeb3be519098fdbdf4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a331ce8a8e408e1f89f2628399de48799"></a><!-- doxytag: member="cd_control_deck::~cd_control_deck" ref="a331ce8a8e408e1f89f2628399de48799" args="()" -->
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcd__control__deck.html#a331ce8a8e408e1f89f2628399de48799">~cd_control_deck</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a78bf89868408e08675b748a48d9c21c3"></a><!-- doxytag: member="cd_control_deck::include_simulation" ref="a78bf89868408e08675b748a48d9c21c3" args="(const char *setup_file)" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcd__control__deck.html#a78bf89868408e08675b748a48d9c21c3">include_simulation</a> (const char *setup_file)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a simulation setup file, and map any variables that are marked with cd_mapped_variable. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5bb580b48fcf70709b3a7cd62692e785"></a><!-- doxytag: member="cd_control_deck::map_simulation_variable" ref="a5bb580b48fcf70709b3a7cd62692e785" args="(const char *dsim_path, const char *cd_group, const char *cd_path)" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcd__control__deck.html#a5bb580b48fcf70709b3a7cd62692e785">map_simulation_variable</a> (const char *dsim_path, const char *cd_group, const char *cd_path)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Map a single simulation variable from the dsim simulation to a ControlDeck data point. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a06984a4e49af5689adf9ec2a6e34c5bd"></a><!-- doxytag: member="cd_control_deck::add_control_system" ref="a06984a4e49af5689adf9ec2a6e34c5bd" args="(cd_control_system *system)" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcd__control__deck.html#a06984a4e49af5689adf9ec2a6e34c5bd">add_control_system</a> (<a class="el" href="classcd__control__system.html">cd_control_system</a> *system)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a control system to the deck. Adding will fail if the new system has the same name as an existing system. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad57d380309305a86a0a213220033d72f"></a><!-- doxytag: member="cd_control_deck::set_time_scale" ref="ad57d380309305a86a0a213220033d72f" args="(double scale)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcd__control__deck.html#ad57d380309305a86a0a213220033d72f">set_time_scale</a> (double scale)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the timescale used by the deck. The number provided is a multiple of real-time; a 2.0 means the deck runs twice as fast as real time. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9581577813ad521ca9296c862a2d79a6"></a><!-- doxytag: member="cd_control_deck::time_scale" ref="a9581577813ad521ca9296c862a2d79a6" args="()" -->
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcd__control__deck.html#a9581577813ad521ca9296c862a2d79a6">time_scale</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the timescale used by the deck. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcd__control__deck.html#a7853a9f3062b8b61aac8b4b9942dae93">initialize</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the control deck. This function must be called before <a class="el" href="classcd__control__deck.html#a73c3f494bc4b06187be8e3dd35a11443" title="Run the control deck. This function generally will never return (control deck errors call exit(1))...">run()</a>;.  <a href="#a7853a9f3062b8b61aac8b4b9942dae93"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcd__control__deck.html#a9d5a2ee6678dcec002f776d8c910ca78">note_marked_variables</a> (void(*note_callback)(void *ctx, const char *path, cd_data_point *pt, bool is_telemetry, bool is_command), void *ctx)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Cause the ControlDeck to call the provided callback for all variables that have been marked as telemetry or commands.  <a href="#a9d5a2ee6678dcec002f776d8c910ca78"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcd__control__deck.html#ac9f5b36cefdd9b50b1633f7ba63b4a5f">start</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set up the ControlDeck to start the run loop.  <a href="#ac9f5b36cefdd9b50b1633f7ba63b4a5f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae01c661ce9d325c1427a3b04a0a5c215"></a><!-- doxytag: member="cd_control_deck::resume_from_pause" ref="ae01c661ce9d325c1427a3b04a0a5c215" args="()" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcd__control__deck.html#ae01c661ce9d325c1427a3b04a0a5c215">resume_from_pause</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the ControlDeck's next loop timers to deal with time slippage (as from a pause) <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae0d4de7e26a5a67ee746ee3772bdff52"></a><!-- doxytag: member="cd_control_deck::run_step" ref="ae0d4de7e26a5a67ee746ee3772bdff52" args="()" -->
ds_date&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcd__control__deck.html#ae0d4de7e26a5a67ee746ee3772bdff52">run_step</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Run a single step of the run loop. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ds_date&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcd__control__deck.html#ad33975a3065e560925e3c407d3f6c6b6">delay_step</a> (const ds_time_interval &amp;delay)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Delay a run loop by a period of time.  <a href="#ad33975a3065e560925e3c407d3f6c6b6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a73c3f494bc4b06187be8e3dd35a11443"></a><!-- doxytag: member="cd_control_deck::run" ref="a73c3f494bc4b06187be8e3dd35a11443" args="()" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcd__control__deck.html#a73c3f494bc4b06187be8e3dd35a11443">run</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the control deck. This function generally will never return (control deck errors call exit(1)). <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">ds_date&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcd__control__deck.html#a8cd03bd7e845ec2e1d9e21390c417128">current_time</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current time for the ControlDeck.  <a href="#a8cd03bd7e845ec2e1d9e21390c417128"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a26a5c2aa470425e516357f1806ca9af7"></a><!-- doxytag: member="cd_control_deck::simulation" ref="a26a5c2aa470425e516357f1806ca9af7" args="()" -->
dsim_simulation *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcd__control__deck.html#a26a5c2aa470425e516357f1806ca9af7">simulation</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get access to the simulation used by the ControlDeck (if one is active) <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcd__control__module.html">cd_control_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcd__control__deck.html#aaba8382d8644e29eb443695827683558">load_control_module</a> (const char *path, const char *type, const char *name, const char *ident=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a module.  <a href="#aaba8382d8644e29eb443695827683558"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>ControlDeck manager class. </p>
<p>The <a class="el" href="classcd__control__deck.html" title="ControlDeck manager class.">cd_control_deck</a> class provides high-level management functions for controlling a set of control systems and their integration with a DSim simulation. Functions are provided for controlling the time scale (the dsim simulation timescale is completely ignored) as well as for mapping simulation variables into ControlDeck variables. The VisualCommander data source will instantiate this class automatically and then call functions as appropriate according to the ControlDeck setup file provided. </p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a2744fa2f48bf2bdeb3be519098fdbdf4"></a><!-- doxytag: member="cd_control_deck::cd_control_deck" ref="a2744fa2f48bf2bdeb3be519098fdbdf4" args="(const char *control_setup_file=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cd_control_deck::cd_control_deck </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"> <em>control_setup_file</em> = <code>NULL</code>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a new control deck, with an optional setup file. </p>
<p>Constructor for a new ControlDeck. If the path to a ControlDeck setup file is provided, the setup file is opened and used to load the specified simulation, systems and modules. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">control_setup_file</td><td>An optional parameter providing a setup file to load. See the <a class="el" href="setup.html">Setup file</a> page. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a8cd03bd7e845ec2e1d9e21390c417128"></a><!-- doxytag: member="cd_control_deck::current_time" ref="a8cd03bd7e845ec2e1d9e21390c417128" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ds_date cd_control_deck::current_time </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the current time for the ControlDeck. </p>
<p>Return either the current time or, if a simulation is loaded, the simulation Julian date. </p>

<p>Referenced by <a class="el" href="classcd__control__deck.html#ae0d4de7e26a5a67ee746ee3772bdff52">run_step()</a>.</p>

</div>
</div>
<a class="anchor" id="ad33975a3065e560925e3c407d3f6c6b6"></a><!-- doxytag: member="cd_control_deck::delay_step" ref="ad33975a3065e560925e3c407d3f6c6b6" args="(const ds_time_interval &amp;delay)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ds_date cd_control_deck::delay_step </td>
          <td>(</td>
          <td class="paramtype">const ds_time_interval &amp;&#160;</td>
          <td class="paramname"> <em>delay</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Delay a run loop by a period of time. </p>
<p>Update the timers for delay. Enables the ControlDeck data source to be paused and resumed in VisualCommander. </p>

</div>
</div>
<a class="anchor" id="a7853a9f3062b8b61aac8b4b9942dae93"></a><!-- doxytag: member="cd_control_deck::initialize" ref="a7853a9f3062b8b61aac8b4b9942dae93" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cd_control_deck::initialize </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize the control deck. This function must be called before <a class="el" href="classcd__control__deck.html#a73c3f494bc4b06187be8e3dd35a11443" title="Run the control deck. This function generally will never return (control deck errors call exit(1))...">run()</a>;. </p>
<p>Initializes all the loaded control systems. First initialize the created data in each system using <a class="el" href="classcd__control__system.html#ac3a59443f07784c18e01483a56f0f22f">cd_control_system::initialize_data()</a>. Set all the variable paths, mark the telemetry and commands, and finally complete the initialization be calling each system's <a class="el" href="classcd__control__system.html#a640f4b080230a7419c5ba8d7d185204a">cd_control_system::initialize()</a> function. </p>

</div>
</div>
<a class="anchor" id="aaba8382d8644e29eb443695827683558"></a><!-- doxytag: member="cd_control_deck::load_control_module" ref="aaba8382d8644e29eb443695827683558" args="(const char *path, const char *type, const char *name, const char *ident=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcd__control__module.html">cd_control_module</a> * cd_control_deck::load_control_module </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"> <em>ident</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Load a module. </p>
<p>Run the _builder function to create the control module. </p>

</div>
</div>
<a class="anchor" id="a9d5a2ee6678dcec002f776d8c910ca78"></a><!-- doxytag: member="cd_control_deck::note_marked_variables" ref="a9d5a2ee6678dcec002f776d8c910ca78" args="(void(*note_callback)(void *ctx, const char *path, cd_data_point *pt, bool is_telemetry, bool is_command), void *ctx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cd_control_deck::note_marked_variables </td>
          <td>(</td>
          <td class="paramtype">void(*)(void *ctx, const char *path, cd_data_point *pt, bool is_telemetry, bool is_command)&#160;</td>
          <td class="paramname"> <em>note_callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"> <em>ctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Cause the ControlDeck to call the provided callback for all variables that have been marked as telemetry or commands. </p>
<p>Provide the telemetry and command paths as part of the interface to VisualCommander. </p>

</div>
</div>
<a class="anchor" id="ac9f5b36cefdd9b50b1633f7ba63b4a5f"></a><!-- doxytag: member="cd_control_deck::start" ref="ac9f5b36cefdd9b50b1633f7ba63b4a5f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cd_control_deck::start </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set up the ControlDeck to start the run loop. </p>
<p>Starts the simulation, if one is loaded, and sets up the run loop using the current date. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="cd__control__deck_8h_source.html">cd_control_deck.h</a></li>
<li>cd_control_deck.cc</li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Apr 5 2013 17:06:31 for ControlDeck by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
