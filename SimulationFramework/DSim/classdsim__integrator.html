<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>DSim: dsim_integrator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<h1>dsim_integrator Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="dsim_integrator" -->
<p>An integrator, providing an implementation of an integration algorithm to be applied to object variables.  
<a href="#_details">More...</a></p>

<p>Inherited by dsim_rk4.</p>

<p><a href="classdsim__integrator-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdsim__integrator.html#af9fe252f2229a408ca1ee085a0261ac5">dsim_integrator_result</a> { <a class="el" href="classdsim__integrator.html#af9fe252f2229a408ca1ee085a0261ac5a690d6b6ea922e9b4c0501bbc51a932da">dsim_integ_none</a> =  0, 
<a class="el" href="classdsim__integrator.html#af9fe252f2229a408ca1ee085a0261ac5a6193ba1d03a02485fb976bfecdbcf234">dsim_integ_continue</a> =  1, 
<a class="el" href="classdsim__integrator.html#af9fe252f2229a408ca1ee085a0261ac5ac832a4f8d6d4f765acee59acaa7e4ed6">dsim_integ_finished</a> =  2
 }</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><p>A result code for an integration step, indicating where the integration currently stands. </p>
 <a href="classdsim__integrator.html#af9fe252f2229a408ca1ee085a0261ac5">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdsim__integrator.html#a4302b09c21701ec19a807775b2e8ada2">dsim_integrator</a> (const char *name)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor. Should have few if any side effects.  <a href="#a4302b09c21701ec19a807775b2e8ada2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab1faa31a6bf94465ddb2744d57c98320"></a><!-- doxytag: member="dsim_integrator::~dsim_integrator" ref="ab1faa31a6bf94465ddb2744d57c98320" args="()" -->
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdsim__integrator.html#ab1faa31a6bf94465ddb2744d57c98320">~dsim_integrator</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdsim__integrator.html#acd69dcdc5513ab8cffa8a7ba6cda882f">describe_setup</a> (void *ds)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Overridden by subclasses to describe the custom setup data that they can handle.  <a href="#acd69dcdc5513ab8cffa8a7ba6cda882f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdsim__integrator.html#ae08285ff8844446619aafd18dd1b7479">describe_setup_command</a> (void *ds, const char *command, const char *description)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Called by subclasses from within <a class="el" href="classdsim__integrator.html#acd69dcdc5513ab8cffa8a7ba6cda882f" title="Overridden by subclasses to describe the custom setup data that they can handle.">describe_setup()</a> to describe a setup command that they accept.  <a href="#ae08285ff8844446619aafd18dd1b7479"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdsim__integrator.html#ad4c012195555f0702fca8b4b87125707">parse_setup</a> (const char *command, const char *data)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Overridden by subclasses to handle custom setup data.  <a href="#ad4c012195555f0702fca8b4b87125707"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdsim__integrator.html#a19ee3a8ec411fc1f14e51e1c1f4c50f3">setup_variable</a> (<a class="el" href="classdsim__variable.html">dsim_variable</a> &amp;variable)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Overridden by subclasses to take whatever action is necessary to set up a variable for integration.  <a href="#a19ee3a8ec411fc1f14e51e1c1f4c50f3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdsim__integrator.html#a8bb5c78ec18b0cf71558dc9ab61ca7cc">cleanup_variable</a> (<a class="el" href="classdsim__variable.html">dsim_variable</a> &amp;variable)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Overridden by subclasses to clean up variables that have been registered for integration before the integrator is destroyed.  <a href="#a8bb5c78ec18b0cf71558dc9ab61ca7cc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdsim__integrator.html#a67ac9fc00b0c2573e9fe737a64f8d8e8">effective_time_for_step</a> (int step, double t, double dt)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Overridden by subclasses to provide the current effective simulation time for the integration step specified given the timestep's start time and time delta.  <a href="#a67ac9fc00b0c2573e9fe737a64f8d8e8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <br class="typebreak"/>
<a class="el" href="classdsim__integrator.html#af9fe252f2229a408ca1ee085a0261ac5">dsim_integrator::dsim_integrator_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdsim__integrator.html#ae63bab6fcab89f93db3c5fbbf9874b2c">step_integration</a> (<a class="el" href="classdsim__variable.html">dsim_variable</a> &amp;variable, int step, double t, double dt)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Overridden by subclasses to step the integration for a single variable.  <a href="#ae63bab6fcab89f93db3c5fbbf9874b2c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdsim__integrator.html#aacdad6a3265f6289467323037d0945ea">request_new_time_delta</a> (double dt, bool restart=false)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Requests that the simulation change the time delta to the provided value.  <a href="#aacdad6a3265f6289467323037d0945ea"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdsim__integrator.html#a890287feeab0bd89ab82db2854e8a786">error</a> (const char *msg,...) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Report an error and stop the simulation.  <a href="#a890287feeab0bd89ab82db2854e8a786"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdsim__integrator.html#aff1df95530c5b0781d8f704172c8b73b">warning</a> (const char *msg,...) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Report a warning.  <a href="#aff1df95530c5b0781d8f704172c8b73b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdsim__integrator.html#a33c9f82038bb01bf96b41c1d27e76658">log</a> (const char *msg,...) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Report an informative notification.  <a href="#a33c9f82038bb01bf96b41c1d27e76658"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>An integrator, providing an implementation of an integration algorithm to be applied to object variables. </p>
<p>All objects within a DSim simulation have an associated integrator, and any integrated variables at any object are registered with its associated integrator. An integrator provides the actual implementation of a particular implementation algorithm; for instance, the Runge-Kutta 4th Order algorithm is provided by the built-in integrator "DSimRK4". Users can provide their own custom integrator subclasses to provide new integration algorithms.</p>
<p>Most of the functions of <a class="el" href="classdsim__integrator.html" title="An integrator, providing an implementation of an integration algorithm to be applied to object variab...">dsim_integrator</a> are virtual functions that should be overridden by subclasses when appropriate to customize the integrator's behavior.</p>
<p>All integrators must have an associated factory function conforming to <a class="el" href="dsim__integrator_8h.html#a193197e56f3784720f231ddd856d0cc0" title="Type for the factory function for an integrator.">dsim_integrator_factory_t</a>. </p>
<hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="af9fe252f2229a408ca1ee085a0261ac5"></a><!-- doxytag: member="dsim_integrator::dsim_integrator_result" ref="af9fe252f2229a408ca1ee085a0261ac5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classdsim__integrator.html#af9fe252f2229a408ca1ee085a0261ac5">dsim_integrator::dsim_integrator_result</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A result code for an integration step, indicating where the integration currently stands. </p>
<p>Result codes are returned by <a class="el" href="classdsim__integrator.html#ae63bab6fcab89f93db3c5fbbf9874b2c" title="Overridden by subclasses to step the integration for a single variable.">step_integration()</a> and are then used by the simulation to determine when integration for a timestep is complete. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="af9fe252f2229a408ca1ee085a0261ac5a690d6b6ea922e9b4c0501bbc51a932da"></a><!-- doxytag: member="dsim_integ_none" ref="af9fe252f2229a408ca1ee085a0261ac5a690d6b6ea922e9b4c0501bbc51a932da" args="" -->dsim_integ_none</em>&nbsp;</td><td>
<p>An error has occurred. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="af9fe252f2229a408ca1ee085a0261ac5a6193ba1d03a02485fb976bfecdbcf234"></a><!-- doxytag: member="dsim_integ_continue" ref="af9fe252f2229a408ca1ee085a0261ac5a6193ba1d03a02485fb976bfecdbcf234" args="" -->dsim_integ_continue</em>&nbsp;</td><td>
<p>The integrator requires additional steps to complete the integration. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="af9fe252f2229a408ca1ee085a0261ac5ac832a4f8d6d4f765acee59acaa7e4ed6"></a><!-- doxytag: member="dsim_integ_finished" ref="af9fe252f2229a408ca1ee085a0261ac5ac832a4f8d6d4f765acee59acaa7e4ed6" args="" -->dsim_integ_finished</em>&nbsp;</td><td>
<p>The integrator has now completed integration and requires no more steps. </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a4302b09c21701ec19a807775b2e8ada2"></a><!-- doxytag: member="dsim_integrator::dsim_integrator" ref="a4302b09c21701ec19a807775b2e8ada2" args="(const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dsim_integrator::dsim_integrator </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"> <em>name</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Constructor. Should have few if any side effects. </p>
<p>If a subclass provides a custom constructor, it is important that the name be passed unchanged to the <a class="el" href="classdsim__integrator.html" title="An integrator, providing an implementation of an integration algorithm to be applied to object variab...">dsim_integrator</a> constructor. Also, the <a class="el" href="classdsim__integrator.html#a33c9f82038bb01bf96b41c1d27e76658" title="Report an informative notification.">log()</a>, <a class="el" href="classdsim__integrator.html#aff1df95530c5b0781d8f704172c8b73b" title="Report a warning.">warning()</a> and <a class="el" href="classdsim__integrator.html#a890287feeab0bd89ab82db2854e8a786" title="Report an error and stop the simulation.">error()</a> functions are not available within the constructor.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name given to this instance of the integrator. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a8bb5c78ec18b0cf71558dc9ab61ca7cc"></a><!-- doxytag: member="dsim_integrator::cleanup_variable" ref="a8bb5c78ec18b0cf71558dc9ab61ca7cc" args="(dsim_variable &amp;variable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dsim_integrator::cleanup_variable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classdsim__variable.html">dsim_variable</a> &amp;&#160;</td>
          <td class="paramname"> <em>variable</em>&#160;)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Overridden by subclasses to clean up variables that have been registered for integration before the integrator is destroyed. </p>
<p>For each variable that is registered with this integrator instance, when the instance is deallocated <a class="el" href="classdsim__integrator.html#a8bb5c78ec18b0cf71558dc9ab61ca7cc" title="Overridden by subclasses to clean up variables that have been registered for integration before the i...">cleanup_variable()</a> will be called with that variable as an argument. At this time any storage allocated and stored with the variable during <a class="el" href="classdsim__integrator.html#a19ee3a8ec411fc1f14e51e1c1f4c50f3" title="Overridden by subclasses to take whatever action is necessary to set up a variable for integration...">setup_variable()</a> should be deallocated. For instance, from the built-in RK4 implementation: </p>
<div class="fragment"><pre class="fragment">    <span class="keywordflow">if</span> (variable.type() == sd_type_matrix)
    {
        ml_matrix *data = (ml_matrix *)variable.integration_ptr();
        <span class="keyword">delete</span> [] data;
        variable.set_integration_ptr(NULL);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (variable.type() == sd_type_double)
    {
        <span class="keywordtype">double</span> *data = (<span class="keywordtype">double</span> *)variable.integration_ptr();
        <span class="keyword">delete</span> [] data;
        variable.set_integration_ptr(NULL);
    }
</pre></div><dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">variable</td><td>The variable that should be cleaned up. This function will be called only once for each variable. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="acd69dcdc5513ab8cffa8a7ba6cda882f"></a><!-- doxytag: member="dsim_integrator::describe_setup" ref="acd69dcdc5513ab8cffa8a7ba6cda882f" args="(void *ds)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * dsim_integrator::describe_setup </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"> <em>ds</em>&#160;)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Overridden by subclasses to describe the custom setup data that they can handle. </p>
<p>By overriding <a class="el" href="classdsim__integrator.html#acd69dcdc5513ab8cffa8a7ba6cda882f" title="Overridden by subclasses to describe the custom setup data that they can handle.">describe_setup()</a>, integrators are able to self-document the setup commands that they accept. This is necessary for users to properly set up objects of this integrators with the DSim Manager application, as only described setup commands can be used from that application. Integrators that do not accept custom setup commands do not need to provide an implementation of this function, but integrators that override <a class="el" href="classdsim__integrator.html#ad4c012195555f0702fca8b4b87125707" title="Overridden by subclasses to handle custom setup data.">parse_setup()</a> should also override <a class="el" href="classdsim__integrator.html#acd69dcdc5513ab8cffa8a7ba6cda882f" title="Overridden by subclasses to describe the custom setup data that they can handle.">describe_setup()</a>.</p>
<p>Within the <a class="el" href="classdsim__integrator.html#acd69dcdc5513ab8cffa8a7ba6cda882f" title="Overridden by subclasses to describe the custom setup data that they can handle.">describe_setup()</a> implemenation, <a class="el" href="classdsim__integrator.html#ae08285ff8844446619aafd18dd1b7479" title="Called by subclasses from within describe_setup() to describe a setup command that they accept...">describe_setup_command()</a> should be called once for each setup command that this integrator accepts.</p>
<p>Always call your integrator's superclass's implementation of <a class="el" href="classdsim__integrator.html#acd69dcdc5513ab8cffa8a7ba6cda882f" title="Overridden by subclasses to describe the custom setup data that they can handle.">describe_setup()</a> first.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ds</td><td>An opaque pointer to a setup data structure. It should be passed unchanged to calls to describe_setup_command, and then provided as the functions return value. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The function should return its argument, ds. </dd></dl>

</div>
</div>
<a class="anchor" id="ae08285ff8844446619aafd18dd1b7479"></a><!-- doxytag: member="dsim_integrator::describe_setup_command" ref="ae08285ff8844446619aafd18dd1b7479" args="(void *ds, const char *command, const char *description)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dsim_integrator::describe_setup_command </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"> <em>ds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"> <em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"> <em>description</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called by subclasses from within <a class="el" href="classdsim__integrator.html#acd69dcdc5513ab8cffa8a7ba6cda882f" title="Overridden by subclasses to describe the custom setup data that they can handle.">describe_setup()</a> to describe a setup command that they accept. </p>
<p>Documents a single setup command accepted by this integrator. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ds</td><td>The opaque setup pointer provided as the parameter to the call to <a class="el" href="classdsim__integrator.html#acd69dcdc5513ab8cffa8a7ba6cda882f" title="Overridden by subclasses to describe the custom setup data that they can handle.">describe_setup()</a>. </td></tr>
    <tr><td class="paramname">command</td><td>A command accepted by this integrator, which should match one of the strings handled by this integrator's implementation of <a class="el" href="classdsim__integrator.html#ad4c012195555f0702fca8b4b87125707" title="Overridden by subclasses to handle custom setup data.">parse_setup()</a>. </td></tr>
    <tr><td class="paramname">description</td><td>A human-readable description of this command. This description will be displayed to users who are setting up instances of this integrator to allow them to properly use the custom setup commands. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a67ac9fc00b0c2573e9fe737a64f8d8e8"></a><!-- doxytag: member="dsim_integrator::effective_time_for_step" ref="a67ac9fc00b0c2573e9fe737a64f8d8e8" args="(int step, double t, double dt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double dsim_integrator::effective_time_for_step </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"> <em>step</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"> <em>dt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Overridden by subclasses to provide the current effective simulation time for the integration step specified given the timestep's start time and time delta. </p>
<p>Returns the effective timestep given an integration step number and the present timestep's time and time delta. Many integration algorithms require that portions of the integration happen at slightly advanced effective timesteps before the intermediate results are combined into a final update for the variable. For instance, from the built-in RK4 implementation: </p>
<div class="fragment"><pre class="fragment">    <span class="keywordflow">switch</span> (step)
    {
        <span class="keywordflow">case</span> 0:
            <span class="keywordflow">return</span> t;
        <span class="keywordflow">case</span> 1:
        <span class="keywordflow">case</span> 2:
        <span class="keywordflow">case</span> 3:
            <span class="keywordflow">return</span> t + dt/2.0;
        <span class="keywordflow">default</span>:
            <span class="keywordflow">return</span> -1.0;
    }
</pre></div> <dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">step</td><td>The integration step number. </td></tr>
    <tr><td class="paramname">t</td><td>The current (actual) time step. </td></tr>
    <tr><td class="paramname">dt</td><td>The current time delta. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The actual time step </dd></dl>

</div>
</div>
<a class="anchor" id="a890287feeab0bd89ab82db2854e8a786"></a><!-- doxytag: member="dsim_integrator::error" ref="a890287feeab0bd89ab82db2854e8a786" args="(const char *msg,...) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dsim_integrator::error </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Report an error and stop the simulation. </p>
<p>Output a message at the error priority level. The message will be sent to the simulation's output handler, if on is installed; it will also be sent to the simulation's output log file. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The format string for the message. See printf documentation for details on the format string. </td></tr>
    <tr><td class="paramname">...</td><td>The additional arguments required by the format string. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a33c9f82038bb01bf96b41c1d27e76658"></a><!-- doxytag: member="dsim_integrator::log" ref="a33c9f82038bb01bf96b41c1d27e76658" args="(const char *msg,...) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dsim_integrator::log </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Report an informative notification. </p>
<p>Output a message at the info priority level. The message will be sent to the simulation's output handler, if on is installed; it will also be sent to the simulation's output log file. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The format string for the message. See printf documentation for details on the format string. </td></tr>
    <tr><td class="paramname">...</td><td>The additional arguments required by the format string. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad4c012195555f0702fca8b4b87125707"></a><!-- doxytag: member="dsim_integrator::parse_setup" ref="ad4c012195555f0702fca8b4b87125707" args="(const char *command, const char *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool dsim_integrator::parse_setup </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"> <em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"> <em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Overridden by subclasses to handle custom setup data. </p>
<p>Handles a custom setup command from the setup file for this object. Exactly what the integrator does with this command is entirely up to the model. Integrators do not have access to the containing simulation object, and variables will not yet be registered at the time that this function is called, so all setup handling must be self-contained.</p>
<p>Integrators that override <a class="el" href="classdsim__integrator.html#ad4c012195555f0702fca8b4b87125707" title="Overridden by subclasses to handle custom setup data.">parse_setup()</a> should also override <a class="el" href="classdsim__integrator.html#ae08285ff8844446619aafd18dd1b7479" title="Called by subclasses from within describe_setup() to describe a setup command that they accept...">describe_setup_command()</a> to document the setup commands. Also, any commands not handled by this integrator should be passed to the superclass implementation of the method for handling. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">command</td><td>The command string provided for this custom setup line. </td></tr>
    <tr><td class="paramname">data</td><td>The data string for the command. The format and interpretation of this command is entirely determined by the integrator that handles the command. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>If the command was successfully handled by this integrator (or a superclass), return true. Returning false will stop setup file parsing and report a simulation error (generally stopping the run of the simulation.) </dd></dl>

</div>
</div>
<a class="anchor" id="aacdad6a3265f6289467323037d0945ea"></a><!-- doxytag: member="dsim_integrator::request_new_time_delta" ref="aacdad6a3265f6289467323037d0945ea" args="(double dt, bool restart=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dsim_integrator::request_new_time_delta </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"> <em>restart</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Requests that the simulation change the time delta to the provided value. </p>
<p>The simulation will consider all time delta change requests and attempt to satisfy each. If multiple integrators request different time deltas, the smallest requested delta will be used. Any time delta change will affect the next timestep, not the current one, unless true is passed for the restart parameter. If an integrator would like to keep the timestep from increasing, it should call this function with the current timestep to request that it be maintained, as another integrator may request an increase. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">dt</td><td>The requested time delta </td></tr>
    <tr><td class="paramname">restart</td><td>Set to true if the current timestep should restart with the newly requested dt; set to false if the new duration only needs to be updated for the next timestep. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a19ee3a8ec411fc1f14e51e1c1f4c50f3"></a><!-- doxytag: member="dsim_integrator::setup_variable" ref="a19ee3a8ec411fc1f14e51e1c1f4c50f3" args="(dsim_variable &amp;variable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dsim_integrator::setup_variable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classdsim__variable.html">dsim_variable</a> &amp;&#160;</td>
          <td class="paramname"> <em>variable</em>&#160;)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Overridden by subclasses to take whatever action is necessary to set up a variable for integration. </p>
<p>For each variable that is registered with this integrator instance, <a class="el" href="classdsim__integrator.html#a19ee3a8ec411fc1f14e51e1c1f4c50f3" title="Overridden by subclasses to take whatever action is necessary to set up a variable for integration...">setup_variable()</a> will be called with that variable as an argument. At this time any storage necessary for integration intermediate results should be allocated and saved at the variable with <a class="el" href="classdsim__variable.html#acb212fcaa4b81b6edc83a6facefa4e08" title="Store an integration pointer in this variable.">dsim_variable::set_integration_ptr()</a>. For instance, from the built-in RK4 implementation: </p>
<div class="fragment"><pre class="fragment">    <span class="keywordflow">if</span> (variable.type() == sd_type_matrix)
    {
        ml_matrix *data = <span class="keyword">new</span> ml_matrix[4];
        variable.set_integration_ptr(data);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (variable.type() == sd_type_double)
    {
        <span class="keywordtype">double</span> *data = <span class="keyword">new</span> <span class="keywordtype">double</span>[4];
        variable.set_integration_ptr(data);
    }
    <span class="keywordflow">else</span>
    {
        <span class="keywordflow">throw</span> dsim_type_mismatch_exception(<span class="stringliteral">&quot;The builtin RK4 integrator can only integrate matrix or double variables.&quot;</span>);
    }
</pre></div><dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">variable</td><td>The variable that should be set up. This function will be called only once for each variable. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae63bab6fcab89f93db3c5fbbf9874b2c"></a><!-- doxytag: member="dsim_integrator::step_integration" ref="ae63bab6fcab89f93db3c5fbbf9874b2c" args="(dsim_variable &amp;variable, int step, double t, double dt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdsim__integrator.html#af9fe252f2229a408ca1ee085a0261ac5">dsim_integrator::dsim_integrator_result</a> dsim_integrator::step_integration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classdsim__variable.html">dsim_variable</a> &amp;&#160;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"> <em>step</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"> <em>dt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Overridden by subclasses to step the integration for a single variable. </p>
<p>Calculates and stores an intermediate value for the provided variable, at the provided integration step. In addition, the variable's state should be updated so that At the time that this function is called, the variable's derivative will already have been updated appropriately by its model.</p>
<p>Note that this function may be called after the integrator has already indicated it has completed integration. The integrator should use the provided step number to determine if this is the case, and do nothing if the step number is not valid for this integrator.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">variable</td><td>The variable to step </td></tr>
    <tr><td class="paramname">step</td><td>The current integration step number. Integration step numbers begin at 0 and increase monotonically. </td></tr>
    <tr><td class="paramname">t</td><td>The current timestep </td></tr>
    <tr><td class="paramname">dt</td><td>The current time delta </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The dsim_integ_finished flag </dd></dl>

</div>
</div>
<a class="anchor" id="aff1df95530c5b0781d8f704172c8b73b"></a><!-- doxytag: member="dsim_integrator::warning" ref="aff1df95530c5b0781d8f704172c8b73b" args="(const char *msg,...) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dsim_integrator::warning </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"> <em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Report a warning. </p>
<p>Output a message at the warning priority level. The message will be sent to the simulation's output handler, if on is installed; it will also be sent to the simulation's output log file. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The format string for the message. See printf documentation for details on the format string. </td></tr>
    <tr><td class="paramname">...</td><td>The additional arguments required by the format string. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Fri Apr 5 2013 16:46:48 for DSim by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
